<?php

/**
 * ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚
 *
 *å­—ç¬¦          æ•°å€¼
 *I             1
 *V             5
 *X             10
 *L             50
 *C             100
 *D             500
 *M             1000
 *ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1 ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš  XXVII, å³ä¸º XX + V + II ã€‚
 *viç‚º6ï¼Œivç‚º4ï¼Œ
 *é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š
 *
 *I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚
 *X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚ 
 *C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚
 *ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚
 */
// è§£é¡Œæ€è·¯
// 1. xæ—é‚Šä¸€å®šæ˜¯iæˆ–è€…æ˜¯vã€‚å³é‚Šç‚ºåŠ å·¦é‚Šç‚ºæ¸›ã€‚
// 532
// DXXXII
// 499
// CDXCIX
// å…ˆåˆ—å‡ºå­—ä¸²é•·åº¦ï¼Œå†ä¾åºå°æ¯”ï¼Œå¦‚æœå³é‚Šæ¯”å·¦é‚Šå¤§ï¼Œå°±æ¸›ï¼Œåä¹‹å°±åŠ ã€‚
// ä»¥ä¸‹æ˜¯è‡ªå·±çš„è§£é¡Œï¼Œè¦åŠ ä¸Šè¨»è§£ã€‚
class Solution
{
    public function romanToInt($s)
    {
        // å…ˆå»ºç«‹ä¸€å€‹é™£åˆ—ï¼ŒæŠŠç¾…é¦¬æ•¸å­—å°æ‡‰çš„æ•¸å­—æ”¾é€²å»
        $num = [
            'I' => 1,
            'V' => 5,
            'X' => 10,
            'L' => 50,
            'C' => 100,
            'D' => 500,
            'M' => 1000,
        ];
        // å…ˆå»ºç«‹ä¸€å€‹è®Šæ•¸ï¼Œç”¨ä¾†å­˜æ”¾æœ€å¾Œçš„æ•¸å­—ã€‚
        $total = 0;
        // str_split()å¯ä»¥æŠŠå­—ä¸²è½‰æˆé™£åˆ—ï¼Œé€™æ¨£å°±å¯ä»¥ç”¨forè¿´åœˆä¾†è·‘äº†ã€‚
        $a = str_split($s);
        // count()å¯ä»¥è¨ˆç®—é™£åˆ—çš„é•·åº¦ï¼Œé™£åˆ—é•·åº¦æ˜¯å¾1é–‹å§‹ç®—ã€‚
        $array = count($a);
        // ç”¨forè¿´åœˆä¾†è·‘ï¼Œè¦å°æ–¼é™£åˆ—é•·åº¦ï¼Œæ‰€ä»¥è¦ç”¨å°æ–¼ã€‚
        for ($key = 0; $key < $array; $key++) {
            // keyå€¼æœƒä¸€ç›´å¾€ä¸ŠåŠ ï¼Œå¦‚æœkey<array-1çš„è©±ï¼Œå°±ä»£è¡¨æ˜¯æœ€å¾Œä¸€å€‹keyå€¼äº†å°±ä¸ç”¨å†è·‘ä¸‹å»äº†ã€‚
            if ($key < $array - 1) {
                // æŠ“å‡ºCï¼ŒXï¼ŒIï¼Œé€™æœƒèˆ‡æ¸›ç›¸é—œçš„ç¾…é¦¬æ•¸å­—ã€‚
                if ($a[$key] == "C" || $a[$key] == "X" || $a[$key] == "I") {
                    // è¦æ˜¯ç™¼ç¾$a[$key+1]çš„æ•¸å€¼ï¼Œå¦‚æœæ˜¯Dæˆ–è€…æ˜¯Mï¼Œå°±ä»£è¡¨æ˜¯æ¸›çš„æƒ…æ³ï¼Œæ‰€ä»¥è¦æŠŠ$a[$key+1]çš„æ•¸å€¼æ¸›å»$a[$key]çš„æ•¸å€¼ã€‚
                    if (($a[$key + 1] == "D" || $a[$key + 1] == "M")) {
                        // é€™é‚Šæ˜¯è¨ˆç®—å¤§æ¨¹å€¼æ¸›å°æ•¸å€¼çš„æƒ…æ³ã€‚
                        $total += $num[$a[$key + 1]] - $num[$a[$key]];
                        // ç›´æ¥å°‡keyå€¼åŠ 1ï¼Œå› ç‚ºå·²ç¶“æŠŠ$a[$key+1]çš„æ•¸å€¼æ¸›å»$a[$key]çš„æ•¸å€¼äº†ï¼Œæ‰€ä»¥å°±ä¸ç”¨å†è·‘$a[$key]çš„æ•¸å€¼äº†ã€‚
                        $key = $key + 1;
                    } 
                    // å¦‚æœ$a[key+1]ç­‰æ–¼Læˆ–è€…æ˜¯Cï¼ŒåŒæ™‚$a[$key]ä¸ç­‰æ–¼Dï¼Œ$a[$key+1]ä¸ç­‰æ–¼Mï¼Œ$a[$key]ä¸ç­‰æ–¼Cï¼Œå°±ä»£è¡¨æ˜¯æ¸›çš„æƒ…æ³ï¼Œå‰é¢åŠ æ‹¬è™Ÿæ˜¯å› ç‚ºè¦å…ˆåˆ¤æ–·$a[$key+1]çš„æ•¸å€¼ï¼Œå†åˆ¤æ–·$a[$key]çš„æ•¸å€¼ã€‚é€™æ¨£æ‰ä¸æœƒæœ‰éŒ¯ã€‚
                    elseif (($a[$key + 1] == "L" || $a[$key + 1] == "C") && $a[$key] != "D" && $a[$key + 1] != "M" && $a[$key] != "C") {
                        $total += $num[$a[$key + 1]] - $num[$a[$key]];
                        $key = $key + 1;
                       
                    } 
                    elseif (($a[$key + 1] == "V" || $a[$key + 1] == "X") && $a[$key] != "C" && $a[$key] != "L" && $a[$key] != "X") {
                        $total += $num[$a[$key + 1]] - $num[$a[$key]];
                        $key = $key + 1;
                    } else {
                        $total += $num[$a[$key]];
                    }
                } else {
                    $total += $num[$a[$key]];
                }
            } else {
                $total += $num[$a[$key]];
            }
        };
        return $total;
    }
};

$a = new Solution;
echo $a->romanToInt("III") . "<br>";
echo $a->romanToInt("IV") . "<br>";
echo $a->romanToInt("IX") . "<br>";
echo $a->romanToInt("LVIII") . "<br>";
echo $a->romanToInt("MCMXCIV") . "<br>";
echo $a->romanToInt("DCXXI") . "<br>";
echo $a->romanToInt("MDCCCLXXXIV") . "<br>";

// ä»¥ä¸‹æ˜¯åˆ¥äººçš„è§£é¡Œï¼Œè¦åŠ ä¸Šè¨»è§£ã€‚
// function romanToInt($s) {
//     å®£å‘Šä¸€å€‹é™£åˆ—ï¼ŒæŠŠç¾…é¦¬æ•¸å­—å°æ‡‰çš„æ•¸å­—æ”¾é€²å»ã€‚ 
//     $arr = ['I' => 1, 'V' => 5, 'X' => 10, 'L' => 50, 'C' => 100, 'D' => 500, 'M' => 1000];
//     å°‡å­—ä¸²è½‰æˆé™£åˆ—ï¼Œé€™æ¨£å°±å¯ä»¥ç”¨foretchè¿´åœˆä¾†è·‘äº†ã€‚
//     $a = str_split($s);
//     é€™è¡Œæ˜¯ç¸½æ•¸ï¼Œå…ˆçµ¦ä»–0ã€‚
//     $r = 0;
//     é€™è¡Œç›®å‰ä¸çŸ¥é“å¹¹å˜›çš„ã€‚
//     $p = 0;
//     foreach($a as $k) {
//         if ($p && $arr[$k] > $p) {
//             $r += $arr[$k] - $p * 2;
//         } else {
//             $r += $arr[$k];
//         }
//         $p = $arr[$k];
//     }
//     return $r;
// }
// }

// ä½œè€…ï¼šYoungğŸ˜‹
// é“¾æ¥ï¼šhttps://leetcode.cn/problems/roman-to-integer/
// æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
// è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚